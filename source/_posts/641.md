---
title: Kutt - 免费网址缩短程序
tags:
  - 程序
categories:
  - 资源分享
date: 2023-10-30 00:00:00
---

> kutt 是一个开源的短网址程序，有了它，可以在分享一些很长的链接的时候，进行缩短链接，使得分享 URL 更简洁。

<!-- more -->

## kutt 支持的特性如下：

免费且开源
自定义域支持
缩短链接的自定义 URL
设置链接密码
设置链接的描述
链接的过期时间
查看、编辑、删除和管理您的链接
管理员帐户可查看、删除和禁止链接
RESTful API
如果常规安装的话需要安装 node,postgreSQL,redis 等。所以使用 docker 来安装这个是最简单的。

ssh 连接到服务器
新建一个文件夹（也可以不新建），里面需要下载 2 个文件。 输入 wget https://raw.githubusercontent.com/thedevs-network/kutt/develop/docker-compose.yml wget https://raw.githubusercontent.com/thedevs-network/kutt/develop/.docker.env 这 2 个文件其实一个是 docker-compose 文件，一个是启动的配置文件 ,如果网络不好的话，可以直接把下面 2 个内容复制到对应的 2 个文件即可。

```
version: "3"

services:
  kutt:
    image: kutt/kutt
    depends_on:
      - postgres
      - redis
    command: ["./wait-for-it.sh", "postgres:5432", "--", "npm", "start"]
    ports:
      - "3000:3000"
    env_file:
      - .env
    environment:
      DB_HOST: postgres
      DB_NAME: kutt
      DB_USER: user
      DB_PASSWORD: pass
      REDIS_HOST: redis

  redis:
    image: redis:6.0-alpine
    volumes:
      - redis_data:/data

  postgres:
    image: postgres:12-alpine
    environment:
      POSTGRES_USER: user
      POSTGRES_PASSWORD: pass
      POSTGRES_DB: kutt
    volumes:
      - postgres_data:/var/lib/postgresql/data

volumes:
  redis_data:
  postgres_data:
```

```
# App port to run on
PORT=3000

# The name of the site where Kutt is hosted
SITE_NAME=Kutt

# The domain that this website is on
DEFAULT_DOMAIN=localhost:3000

# Generated link length
LINK_LENGTH=6

# Postgres database credential details
DB_HOST=postgres
DB_PORT=5432
DB_NAME=postgres
DB_USER=
DB_PASSWORD=
DB_SSL=false

# Redis host and port
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=

# Disable registration
DISALLOW_REGISTRATION=false

# Disable anonymous link creation
DISALLOW_ANONYMOUS_LINKS=false

# The daily limit for each user
USER_LIMIT_PER_DAY=50

# Create a cooldown for non-logged in users in minutes
# Set 0 to disable
NON_USER_COOLDOWN=0

# Max number of visits for each link to have detailed stats
DEFAULT_MAX_STATS_PER_LINK=5000

# Use HTTPS for links with custom domain
CUSTOM_DOMAIN_USE_HTTPS=false

# A passphrase to encrypt JWT. Use a long and secure key.
JWT_SECRET=securekey

# Admin emails so they can access admin actions on settings page
# Comma seperated
ADMIN_EMAILS=

# Invisible reCaptcha secret key
# Create one in https://www.google.com/recaptcha/intro/
RECAPTCHA_SITE_KEY=
RECAPTCHA_SECRET_KEY=

# Google Cloud API to prevent from users from submitting malware URLs.
# Get it from https://developers.google.com/safe-browsing/v4/get-started
GOOGLE_SAFE_BROWSING_KEY=

# Your email host details to use to send verification emails.
# More info on http://nodemailer.com/
# Mail from example "Kutt <support@kutt.it>". Leave empty to use MAIL_USER
MAIL_HOST=
MAIL_PORT=
MAIL_SECURE=true
MAIL_USER=
MAIL_FROM=
MAIL_PASSWORD=

# The email address that will receive submitted reports.
REPORT_EMAIL=

# Support email to show on the app
CONTACT_EMAIL=
```

将.docker.env 修改名字为 .env 输入 mv .docker.env .env 即可
配置文件里的 DEFAULT_DOMAIN=localhost:3000 ，可以先修改成服务器 IP：3000 而不是 localhost，不然访问会跳转出错。 当配置完反向代理后，再将这里的配置更改为域名即可。 主要确保邮箱相关的配置正确

```
MAIL_HOST=smtp.qq.com
MAIL_PORT=465
MAIL_SECURE=false
MAIL_USER=8XX@qq.com
MAIL_FROM=8XXX@qq.com
MAIL_PASSWORD=XXXX
```

docker-compose up -d 来启动 kutt 以及相关的各个容器
前台访问 ip:3000 。查看 kutt 的页面
到这一步，已经搭建完毕，然后我们需要配置反向代理，可以使用 npm 也可以使用 certbot，也可以使用宝塔。这个就看个人选择了。

设置好反向代理之后，在前台就可以进行正常使用了。 复制生成的短链接，是可以正常跳转到 google 的。图片
注意事项

kutt 默认是没有管理员用户的，需要通过邮箱注册，所以就需要.env 里邮箱相关的内容都配置正确
我本人在搭建完毕的时候，注册账号时候始终是失败“an error occurred” ，通过在作者的 Issues 里发现了有很多人大量反馈此问题，应该是作者们对接 smtp 服务的 bug。我尽力尝试去根据各种 issue 解决，最终还是失败了。 虽然不影响短链接的生成以及使用，但是无法登录管理员后台还是很难受的。
注册失败实际上是没有发邮件激活成功，这种方式可以通过去登录 postgresql 的容器，查找到对应的用户的验证 token，在访问 URL 激活即可。 可以参考：