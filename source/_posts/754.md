---
title: 
tags:
  - 运维
categories:
  - 运维教程
date: 2024-10-03 00:00:00
---

> 

<!-- more -->

## 

要通过 Nginx 防止网站被镜像，可以采取以下几种措施：

1. **使用 JavaScript 检查域名**：
   在前端使用 JavaScript 判断当前域名是否合法，如果不是授权域名，则跳转到原域名。示例代码如下：
   ```javascript
   var domain = "你的域名"; // 例如 www.example.com
   if (location.href.indexOf(domain) === -1) {
       window.location = 'https://你的域名'; // 例如 https://www.example.com
   }
   ```
   为了增强安全性，可以对这段代码进行混淆处理，以防止被替换。

2. **设置 HTTP 头部**：
   使用 `X-FRAME-OPTIONS` 和 `Content-Security-Policy` 头部来防止网站被嵌入到 iframe 中。可以在 Nginx 配置中添加以下内容：
   ```nginx
   add_header X-Frame-Options "DENY";
   add_header Content-Security-Policy "frame-ancestors 'none'";
   ```

3. **限制 IP 访问**：
   定期分析访问日志，将可疑的 IP 地址加入黑名单，或者限制访问频率。这可以通过 Nginx 的 `limit_conn` 和 `limit_req` 指令实现。

4. **过滤 User-Agent**：
   通过检查请求的 User-Agent，拒绝来自已知爬虫或代理的请求。例如：
   ```nginx
   if ($http_user_agent ~* "curl|wget|python") {
       return 403;
   }
   ```

5. **使用 HTTPS**：
   强制使用 HTTPS，可以通过配置 Nginx 来实现。确保所有流量都通过安全的连接传输，这样可以增加安全性。

6. **监控和分析访问日志**：
   定期检查访问日志，识别异常流量模式，并采取相应措施。

通过结合这些方法，可以有效降低网站被镜像的风险。
