---
title: TestDisk 免费开源 Linux 数据恢复工具
tags:
  - 工具
categories:
  - 资源分享
date: 2024-10-30 00:00:00
---

> 

<!-- more -->

## 介绍

TestDisk 是一款功能强大的免费开源数据恢复软件，主要用于恢复丢失的分区和修复无法启动的磁盘。它支持多种文件系统，包括 NTFS、FAT12、FAT16、FAT32、exFAT、ext2、ext3 和 ext4 等。TestDisk 可以帮助修复分区表、恢复已删除的分区、重建启动扇区、修复文件分配表以及从不同文件系统中恢复已删除的文件。

以下是 TestDisk 的一些主要特点和功能：

1. **分区表修复**：TestDisk 可以修复分区表，恢复因软件故障、病毒或人为错误（如意外删除分区表）而丢失的分区。

2. **启动扇区恢复**：它能够从备份中恢复 FAT32 启动扇区，并重建 FAT12/FAT16/FAT32 以及 NTFS 的启动扇区。

3. **文件恢复**：TestDisk 可以从 FAT、NTFS 和 ext2 文件系统中恢复已删除的文件。

4. **支持多种操作系统**：TestDisk 可以在 DOS、Windows、Linux、FreeBSD、NetBSD、OpenBSD、SunOS 和 MacOS X 上运行。

5. **支持多种文件系统**：除了上述文件系统外，TestDisk 还支持 APFS、BeFS、BSD disklabel、CramFS、HFS、JFS、Linux btrfs、Linux ext4、Linux RAID、Linux Swap、LVM、Mac partition map、Novell NSS、ReiserFS、UFS、XFS 和 ZFS 等。

6. **新手和专家模式**：TestDisk 提供了适合新手和专家的功能。对于不熟悉数据恢复的用户，TestDisk 可以收集非启动驱动器的详细信息，然后发送给专业技术人员进行进一步分析。

7. **文件恢复操作步骤**：TestDisk 提供了一步一步的指南，帮助用户恢复丢失的分区和修复损坏的启动扇区。

8. **文档和支持**：TestDisk 提供了在线文档和指南，以及一个活跃的社区论坛，用户可以在其中寻求帮助和分享经验。

TestDisk 的最新稳定版本是 7.2，发布于 2024 年 2 月 22 日。用户可以从官方网站 [CGSecurity](https://www.cgsecurity.org) 下载 TestDisk 以及其相关工具 PhotoRec 的二进制可执行文件和源代码。PhotoRec 是一个基于签名的文件恢复工具，能够处理超过 440 种文件格式，包括 JPG、MSOffice 和 OpenOffice 文档等。

## 安装

TestDisk 的安装步骤因操作系统而异，以下是针对不同操作系统的安装指南：

### Windows 安装步骤
1. **下载 MinGW**：访问 MinGW 官网下载并安装 MinGW。
2. **配置环境变量**：将 MinGW 的 `bin` 目录添加到系统环境变量 `PATH` 中。
3. **下载 TestDisk 源码**：
```
git clone https://github.com/qayshp/TestDisk.git
cd TestDisk
```
4. **编译 TestDisk**：
```
./configure
make
```
5. **安装 TestDisk**：
```
make install
```
   
### Linux 安装步骤
对于不同的 Linux 发行版，安装命令有所不同：

- **Ubuntu/Debian**：
```
sudo apt update
sudo apt -y install testdisk
```
  

- **Red Hat 和 CentOS 7**：
```
yum install epel-release
yum update
yum install testdisk
```
  

- **Red Hat 和 CentOS 8**：
```
yum install https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm
yum update
yum install testdisk
```
  

- **Fedora**：
```
sudo dnf install testdisk
```
  

- **Arch Linux**：
```
sudo pacman -S testdisk
```
  

### macOS 安装步骤
1. **安装 Xcode**：从 App Store 安装 Xcode。
2. **安装 Homebrew**：
```
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
```
3. **安装依赖项**：
```
brew install gcc
```
4. **下载 TestDisk 源码**：
```
git clone https://github.com/qayshp/TestDisk.git
cd TestDisk
```
5. **编译 TestDisk**：
```
./configure
make
```
6. **安装 TestDisk**：
```
sudo make install
```
   

以上步骤将帮助你在不同的操作系统上安装 TestDisk。安装完成后，你可以通过命令行运行 TestDisk 来进行数据恢复操作。

## 使用

在使用 TestDisk 时，用户应避免在数据恢复过程中进一步使用存储已删除数据的介质，并且最好将恢复的文件复制到另一个分区或磁盘上，以防止数据被覆盖。

使用 TestDisk 恢复分区的步骤如下：

### 1. 启动 TestDisk
- 打开命令行界面（在 Windows 中是 CMD 或 PowerShell，在 Linux 或 MacOS 中是终端）。
- 导航到 TestDisk 程序所在的目录。
- 以管理员权限运行 TestDisk（在 Windows 中以管理员身份运行命令行，在 Linux 或 MacOS 中使用 `sudo`）。

### 2. 创建日志文件
- 在启动 TestDisk 后，你可以选择创建一个日志文件来记录恢复过程中的详细信息，这有助于后续分析和问题解决。

### 3. 选择磁盘
- 使用上下箭头键选择包含丢失分区的硬盘。
- 按 Enter 键确认选择。

### 4. 选择分区表类型
- TestDisk 会显示检测到的分区表类型，通常它会自动识别正确的类型。
- 按 Enter 键继续。

### 5. 分析当前分区表
- 选择“Analyse”（分析）选项来检查当前的分区结构并搜索丢失的分区。
- 按 Enter 键开始分析。

### 6. 快速搜索分区
- TestDisk 会执行快速搜索以查找丢失的分区。
- 如果快速搜索找到了丢失的分区，你可以选择“Partition 3”（或你的丢失分区）并按 'p' 键列出文件。

### 7. 保存分区表或搜索更多分区
- 如果所有分区都已找到并且数据正确列出，可以选择“Write”（写入）菜单项来保存分区结构。
- 如果仍有分区未找到，选择“Deeper Search”（深度搜索）来进一步搜索。

### 8. 深度搜索分区（如果需要）
- 深度搜索会扫描每个柱面，寻找 FAT32 的备份启动扇区、NTFS 的备份启动超级块和 ext2/ext3 的备份超级块。
- 深度搜索后，检查结果并确认找到的分区。

### 9. 选择分区并设置为恢复状态
- 使用左右箭头键将选中的分区状态从“D(eleted)”更改为“L(ogical)”，使其成为可恢复的分区。

### 10. 恢复分区表
- 确认所有分区都已列出后，在“Write”（写入）菜单项上按 Enter 键、按 'y' 键确认，然后按 OK 键写入新的分区结构。

### 11. 重启计算机
- TestDisk 会提示你需要重启计算机以访问恢复的数据。
- 按 Enter 键退出 TestDisk 并重启计算机。

请注意，这些步骤是一个大致的指南，具体的操作可能会根据你的系统环境和分区类型有所不同。务必在操作前备份重要数据，并在不确定的情况下寻求专业帮助。