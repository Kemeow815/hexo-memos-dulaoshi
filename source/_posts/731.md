---
title: 如何借助 Vercel 自建 NPM 镜像教程
tags:
  - 稿件
categories:
  - 资源分享
date: 2024-07-28 00:00:00
---

> 

<!-- more -->

## 

要借助 Vercel 自建 NPM 镜像，可以参考以下步骤：

1. **注册 Vercel 账号**：
   - 首先，访问 Vercel 官网 [https://vercel.com/signup](https://vercel.com/signup) 并使用 GitHub、GitLab 或 Bitbucket 账号进行注册和登录。注册完成后，可以在配置页面修改自己的邮箱地址。

2. **安装 Vercel CLI**：
   - 安装 Vercel 的命令行工具，可以通过 npm 安装：
     ```bash
     npm i -g vercel
     ```
   - 成功安装后，运行以下命令登录账户：
     ```bash
     vc login
     ```
   - Vercel 的登录会通过邮箱发送一封邮件确认。

3. **创建项目**：
   - 通过 GitHub 快捷登录 Vercel，并选择一个 Git 仓库进行部署。可以选择现有的仓库或新建一个仓库。

4. **配置项目**：
   - 在项目中创建一个 `vercel.json` 文件，用于配置 Vercel 的部署选项。例如：
     ```json
     {
       "headers": [
         {
           "source": "/sw.js",
           "headers": [
             {
               "key": "Cache-Control",
               "value": "public, max-age=0, must-revalidate"
             }
           ]
         },
         {
           "source": "(.*)",
           "headers": [
             {
               "key": "Cache-Control",
               "value": "public, s-maxage=86400, max-age=86400"
             }
           ]
         }
       ]
     }
     ```
   - 这将帮助优化缓存策略，提高访问速度。

5. **部署项目**：
   - 使用 Vercel CLI 或通过 Vercel 官网进行项目部署。部署成功后，Vercel 会提供一个默认的域名，也可以自定义绑定自己的域名。

6. **绑定自定义域名**：
   - 如果需要使用自己的域名，可以通过 Vercel 的 DNS 服务进行绑定。首先在 Vercel 控制台添加域名，然后修改 DNS 记录，将域名服务器指向 Vercel 提供的 DNS 服务器：
     ```
     ns1.vercel-dns.com
     ns2.vercel-dns.com
     ```
   - 这样 Vercel 会自动生成 SSL 证书并启用 HTTPS。

7. **使用 Verdaccio 搭建 NPM 镜像**：
   - Verdaccio 是一个轻量级的私有 npm 代理仓库，可以缓存 npmjs.org 仓库，提供私有仓库功能，并支持多仓库链接和覆盖公共软件包。
   - 可以通过 Docker-compose 方式部署 Verdaccio，具体步骤可以参考 Verdaccio 官方文档。

8. **配置 NPM 镜像**：
   - 在项目中配置 `package.json` 文件，指定 Verdaccio 作为 NPM 镜像：
     ```json
     {
       "name": "your-package",
       "version": "1.0.0",
       "private": true,
       "scripts": {
         "start": "node index.js"
       },
       "dependencies": {
         "react": "^16.8.0"
       },
       "verdaccio": {
         "storage": "./storage",
         "uplinks": {
           "npmjs": {
             "url": "https://registry.npmjs.org"
           }
         },
         "packages": {
           "'**'": {
             "access": "$all",
             "publish": "$authenticated",
             "proxy": "npmjs"
           }
         }
       }
     }
     ```

通过以上步骤，你可以利用 Vercel 自建一个 NPM 镜像，实现快速的包管理和部署。
